<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø£Ø°ÙƒØ§Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†Ø²Ù„</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">
<style>
body { font-family: 'Amiri', serif; background-color: #f9f9f9; padding: 20px; }
h2 {
  text-align: center;
  margin-bottom: 25px;
  color: #1e8449;
  font-size: 34px;
  font-weight: bold;
  border-bottom: 3px solid #d4efdf;
  padding-bottom: 10px;
}
.azkar-list { list-style: none; padding: 0; }
.zekr-item { background-color: #cdeb29; border-radius: 10px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.zekr-footer { margin-top: 10px; display: flex; align-items: center; flex-wrap: wrap; }
.repeat-count {
  font-size: 19px;
  font-weight: bold;
  color: #2c3e50;
}
.counter {
  font-size: 22px;
  font-weight: bold;
  color: #242da7;
}
.count-btn { padding: 5px 10px; cursor: pointer; }
.count-btn.completed { background-color: gray; cursor: not-allowed; }
.count-btn .counter {
  font-size: 22px;
  margin-right: 6px;
  color: white;
}
.stats {
  text-align: center;
  font-size: 18px;
  margin-top: 10px;
  background: #f4fdf7;
  padding: 6px 10px;
  border-radius: 8px;
}
.reward { font-weight: bold; color: #27ae60; margin-left: 10px; }
.pdf-btn {
  display: block;
  text-align: center;
  background: white;
  color: #1e8449;
  padding: 12px;
  border: 2px solid #1e8449;
  border-radius: 12px;
  text-decoration: none;
  font-size: 18px;
  font-weight: bold;
  margin: 20px 0;
  transition: 0.3s;
}

.pdf-btn:hover {
  background: #1e8449;
  color: white;
}
#stats-panel { background-color: #fff; padding: 15px; border-radius: 10px; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
#month-select, #year-select { margin-bottom: 10px; }
#total-rewards { font-weight: bold; margin-top: 10px; color: #2980b9; }
.zekr-item p {
  font-size: 24px;
  line-height: 2;
  background: #f0f8f5;
  padding: 10px;
  border-radius: 8px;
}
.vertical-layout {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
}

.vertical-layout .count-btn {
  font-size: 20px;
  padding: 14px 30px;
  border-radius: 15px;
  font-weight: bold;
  min-width: 140px;
  transition: 0.2s ease;
}

.vertical-layout .count-btn:hover {
  transform: scale(1.05);
}

.vertical-layout .repeat-count {
  font-size: 18px;
  font-weight: bold;
}

.vertical-layout .reward {
  font-size: 17px;
  color: #27ae60;
  font-weight: bold;
}

</style>
</head>
<body>

<h2>Ø£Ø°ÙƒØ§Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†Ø²Ù„</h2>

<ul class="azkar-list">
  <li class="zekr-item" data-id="101" data-max="1" data-reward="1" data-reward-symbol="ğŸ ">
    <p>Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø¨Ø§Ø¨ Ù‚Ù„ (Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù).</p>
    <div class="zekr-footer vertical-layout">
  <button class="count-btn btn btn-success">Ø§Ø·Ù…Ø¦Ù† <span class="counter">0</span></button> 
  <span class="repeat-count">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: 1 Ù…Ø±Ø©</span>
  <span class="reward">ğŸ  Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: 1</span>
    </div>
    <div class="stats">
      ÙŠÙˆÙ…ÙŠ: <span class="daily">0</span> | Ø£Ø³Ø¨ÙˆØ¹ÙŠ: <span class="weekly">0</span> | Ø´Ù‡Ø±ÙŠ: <span class="monthly">0</span> | Ø³Ù†ÙˆÙŠ: <span class="yearly">0</span>
    </div>
  </li>

  <li class="zekr-item" data-id="102" data-max="1" data-reward="1" data-reward-symbol="ğŸ ">
    <p>Ø§Ù„Ù„Ù‘ÙÙ‡Ù…Ù‘Ù Ø¥Ù†Ù‘ÙÙŠ Ø£Ø³Ø£Ù„ÙÙƒÙ Ø®ÙŠØ±Ù Ø§Ù„Ù…ÙˆÙ„Ø¬ÙØŒ ÙˆØ®ÙŠØ±Ù Ø§Ù„Ù…Ø®Ø±ÙØ¬ÙØŒ Ø¨Ø³Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙÙ„ÙØ¬Ù†Ø§ØŒ ÙˆØ¨Ø³Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø®Ø±ÙØ¬Ù†Ø§ØŒ ÙˆØ¹Ù„ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø±Ø¨Ù‘ÙÙ†Ø§ ØªÙˆÙÙƒÙ‘ÙÙ„Ù†Ø§.</p>
     <div class="zekr-footer vertical-layout">
  <button class="count-btn btn btn-success">Ø§Ø·Ù…Ø¦Ù† <span class="counter">0</span></button> 
  <span class="repeat-count">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: 1 Ù…Ø±Ø©</span>
  <span class="reward">ğŸ  Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: 1</span>
     </div>
    <div class="stats">
      ÙŠÙˆÙ…ÙŠ: <span class="daily">0</span> | Ø£Ø³Ø¨ÙˆØ¹ÙŠ: <span class="weekly">0</span> | Ø´Ù‡Ø±ÙŠ: <span class="monthly">0</span> | Ø³Ù†ÙˆÙŠ: <span class="yearly">0</span>
    </div>
  </li>

  <li class="zekr-item" data-id="103" data-max="1" data-reward="1" data-reward-symbol="ğŸ ">
    <p>Ø§ÙÙ„Ø³Ù‘ÙÙ„ÙØ§Ù…Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ¨ÙØ±ÙÙƒÙØ§ØªÙÙ‡Ù.</p>
    <div class="zekr-footer vertical-layout">
  <button class="count-btn btn btn-success">Ø§Ø·Ù…Ø¦Ù† <span class="counter">0</span></button> 
  <span class="repeat-count">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: 1 Ù…Ø±Ø©</span>
  <span class="reward">ğŸ  Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: 1</span>
     </div>
    <div class="stats">
      ÙŠÙˆÙ…ÙŠ: <span class="daily">0</span> | Ø£Ø³Ø¨ÙˆØ¹ÙŠ: <span class="weekly">0</span> | Ø´Ù‡Ø±ÙŠ: <span class="monthly">0</span> | Ø³Ù†ÙˆÙŠ: <span class="yearly">0</span>
    </div>
  </li>

  <li class="zekr-item" data-id="104" data-max="1" data-reward="1" data-reward-symbol="ğŸ ">
    <p>Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙƒÙÙ„ÙÙ…ÙØ§ØªÙ Ø§Ù„Ù„Ù‡Ù Ø§Ù„ØªÙ‘ÙØ§Ù…Ù‘ÙØ§ØªÙ Ù…ÙÙ† Ø´ÙØ±Ù‘Ù Ù…Ø§ Ø®ÙÙ„ÙÙ‚Ù.</p>
    <div class="zekr-footer vertical-layout">
  <button class="count-btn btn btn-success">Ø§Ø·Ù…Ø¦Ù† <span class="counter">0</span></button> 
  <span class="repeat-count">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: 1 Ù…Ø±Ø©</span>
  <span class="reward">ğŸ  Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: 1</span>
     </div>
    <div class="stats">
      ÙŠÙˆÙ…ÙŠ: <span class="daily">0</span> | Ø£Ø³Ø¨ÙˆØ¹ÙŠ: <span class="weekly">0</span> | Ø´Ù‡Ø±ÙŠ: <span class="monthly">0</span> | Ø³Ù†ÙˆÙŠ: <span class="yearly">0</span>
    </div>
  </li>
</ul>
<a href="pdfs/10.pdf" class="pdf-btn" target="_blank">
  ğŸ“„ ØªØ­Ù…ÙŠÙ„ Pdf Ù„Ø£Ø°ÙƒØ§Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†Ø²Ù„
</a>

<div id="stats-panel">
  <h4>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‡Ø¬Ø±ÙŠ Ù„ÙƒÙ„ Ø³Ù†Ø© ÙˆØ´Ù‡Ø±</h4>
  <select id="year-select" class="form-control"></select>
  <select id="month-select" class="form-control"></select>
  <div id="stats-results"></div>
  <div id="total-rewards">ğŸ  Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª: 0</div>
</div>

<script src="js/hijrah-date.min.js"></script>
<script>
// ============================
// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠØ©
// ============================
const hijriMonths = [
  "Ù…Ø­Ø±Ù…", "ØµÙØ±", "Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„", "Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ø®Ø±", "Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„Ù‰",
  "Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø¢Ø®Ø±Ø©", "Ø±Ø¬Ø¨", "Ø´Ø¹Ø¨Ø§Ù†", "Ø±Ù…Ø¶Ø§Ù†", "Ø´ÙˆØ§Ù„",
  "Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©", "Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"
];

// ============================
// Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ
// ============================
function getHijriKeys(){
  const today = new HijrahDate();
  const hYear = today.getFullYear();
  const hMonth = today.getMonth() + 1;
  const hDay = today.getDate();
  const hWeek = Math.ceil(hDay/7);
  return {
    day: `${hYear}-${hMonth}-${hDay}`,
    week: `${hYear}-${hMonth}-W${hWeek}`,
    month: `${hYear}-${hMonth}`,
    year: `${hYear}`
  };
}

// ============================
// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª Ù„ÙƒÙ„ Ø°ÙƒØ±
// ============================
function updateZekrCounters(){
  document.querySelectorAll('.zekr-item').forEach(item=>{
    const id = item.dataset.id;
    const max = parseInt(item.dataset.max);
    const btn = item.querySelector('.count-btn');
    const counterSpan = item.querySelector('.counter');
    const dailySpan = item.querySelector('.daily');
    const weeklySpan = item.querySelector('.weekly');
    const monthlySpan = item.querySelector('.monthly');
    const yearlySpan = item.querySelector('.yearly');

    const stored = JSON.parse(localStorage.getItem(id)) || {};
    const keys = getHijriKeys();

    dailySpan.textContent = stored[keys.day] || 0;
    weeklySpan.textContent = stored[keys.week] || 0;
    monthlySpan.textContent = stored[keys.month] || 0;
    yearlySpan.textContent = stored[keys.year] || 0;

    counterSpan.textContent = Math.min(counterSpan.textContent, max);

    if(parseInt(counterSpan.textContent) >= max){
      btn.classList.add('completed');
      btn.disabled = true;
    }
  });

  updateTotalRewards();
}

// ============================
// Ø­Ø³Ø§Ø¨ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ù„Ù„Ù‚Ø³Ù…
// ============================
function updateTotalRewards(){
  let total = 0;
  document.querySelectorAll('.zekr-item').forEach(item=>{
    const id = item.dataset.id;
    const stored = JSON.parse(localStorage.getItem(id)) || {};
    total += stored.rewards || 0;
  });
  document.getElementById('total-rewards').textContent = `ğŸ  Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª: ${total}`;
}

// ============================
// Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ LocalStorage + Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
// ============================
function fillYearSelect(){
  const yearSet = new Set();

  document.querySelectorAll('.zekr-item').forEach(item=>{
    const id = item.dataset.id;
    const stored = JSON.parse(localStorage.getItem(id)) || {};
    Object.keys(stored).forEach(k=>{
      if(!k.includes('W') && !k.includes('-') && !isNaN(parseInt(k))){
        yearSet.add(k);
      }
    });
  });

  const today = new HijrahDate();
  yearSet.add(today.getFullYear());

  const years = Array.from(yearSet).sort((a,b)=>a-b);

  const select = document.getElementById('year-select');
  select.innerHTML = '';

  years.forEach(y=>{
    const opt = document.createElement('option');
    opt.value = y;
    opt.textContent = `${y} Ù‡Ù€`;
    select.appendChild(opt);
  });
}

// ============================
// Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø´Ù‡Ø±
// ============================
function fillMonthSelect(selectedYear){
  const select = document.getElementById("month-select");
  select.innerHTML = "";
  hijriMonths.forEach((monthName, index)=>{
    const value = `${selectedYear}-${index+1}`;
    const opt = document.createElement("option");
    opt.value = value;
    opt.textContent = `${monthName} ${selectedYear} Ù‡Ù€`;
    select.appendChild(opt);
  });
}

// ============================
// Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ø´Ù‡Ø± ÙˆØ³Ù†Ø© Ù…Ø­Ø¯Ø¯ÙŠÙ†
// ============================
function showStats(yearMonth){
  const results = document.getElementById("stats-results");
  results.innerHTML = "<ul>";
  document.querySelectorAll('.zekr-item').forEach(item=>{
    const id = item.dataset.id;
    const text = item.querySelector("p").textContent;
    const stored = JSON.parse(localStorage.getItem(id))||{};
    const count = stored[yearMonth] || 0;
    results.innerHTML += `<li><b>${text}</b>: ${count} Ù…Ø±Ø©</li>`;
  });
  results.innerHTML += "</ul>";
}

// ============================
// Ø²Ø±Ø§Ø± Ø§Ù„ØªØ³Ø¨ÙŠØ­ + Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
// ============================
document.querySelectorAll('.count-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const zekrItem = btn.closest('.zekr-item');
    const id = zekrItem.dataset.id;
    const max = parseInt(zekrItem.dataset.max);
    const rewardValue = parseInt(zekrItem.dataset.reward);
    const counterSpan = zekrItem.querySelector('.counter');

    if(parseInt(counterSpan.textContent) >= max) return;

    const keys = getHijriKeys();
    const stored = JSON.parse(localStorage.getItem(id))||{};

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
    counterSpan.textContent = parseInt(counterSpan.textContent)+1;
    stored[keys.day] = (stored[keys.day]||0)+1;
    stored[keys.week] = (stored[keys.week]||0)+1;
    stored[keys.month] = (stored[keys.month]||0)+1;
    stored[keys.year] = (stored[keys.year]||0)+1;

    // Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØ§ÙØ£Ø©
    stored.rewards = (stored.rewards||0) + rewardValue;

    localStorage.setItem(id, JSON.stringify(stored));

    updateZekrCounters();
    fillYearSelect();
    fillMonthSelect(keys.year);
    showStats(`${keys.year}-${keys.month}`);
  });
});

// ============================
// Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ù†Ø© Ø£Ùˆ Ø§Ù„Ø´Ù‡Ø± ÙÙŠ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
// ============================
document.getElementById("year-select").addEventListener('change', e=>{
  const year = e.target.value;
  fillMonthSelect(year);
  showStats(`${year}-1`);
});

document.getElementById("month-select").addEventListener('change', e=>{
  showStats(e.target.value);
});

// ============================
// Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
// ============================
updateZekrCounters();
fillYearSelect();
const today = new HijrahDate();
fillMonthSelect(today.getFullYear());
showStats(`${today.getFullYear()}-${today.getMonth()+1}`);

</script>
</body>
</html>
